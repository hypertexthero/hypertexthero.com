<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="robots" content="all">
<meta http-equiv="imagetoolbar" content="false">
<meta name="MSSmartTagsPreventParsing" content="true">
<meta name="google-site-verification" content="CvLKcJBPrtNY455YaUc8M30eCw8V1ITHJEmg1l-mX9U" />
<meta name="keywords" content="">

<meta name="author" content="Simon Griffee">
<meta name="copyright" content="Copyright 2001-2014 Simon Griffee.">

<!-- https://indieauth.com/setup -->
<link href="https://github.com/hypertexthero" rel="me">

<link rel="Shortcut Icon" href="/static/favicon.ico" type="image/x-icon">

<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="http://hypertexthero.com/logbook/atom/">
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://hypertexthero.com/logbook/rss/">

<link href='http://fonts.googleapis.com/css?family=Gentium+Basic:400,400italic,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/static/css/hypertexthero.css" type="text/css">
<link rel="stylesheet" href="/static/css/code.css" type="text/css">





<!--[if lte IE 6]>
<link rel="stylesheet" type="text/css" media="screen" href="/static/css/ie6.css" />
<![endif]-->

<!--[if IE 7]>
<link rel="stylesheet" type="text/css" media="screen" href="/static/css/ie7.css" />
<![endif]-->



<title>
    Enable Keyword Search in Textpattern - Hypertexthero Linked List 
</title>
</head>

<body id="logbook" class="detail">

    
<div id="wrapper">
<div id="page">
  <div id="header">
    
  <div class="nav">
  <a id="loglogo" href="/" title="Hypertexthero homepage."><img src="/static/img/logo.png"></a>
  <ul>
      <li><a class="nav-home" href="/" title="Hypertexthero homepage.">Hypertexthero</a></li> 
      <li><a class="nav-logbook" href="/logbook/" title="Hypertexthero's blog on web, design and simplicity, also known as the Logbook.">Blog</a>, <a class="nav-archive" href="/archive/" title="Archive of original blog entries.">Archive</a></li>
      <li><a class="nav-work" href="/work/" title="Work examples.">Projects</a></li> 
      <li><a class="nav-contact" href="/contact/" title="Call Hypertexthero.">Contact</a></li>
  </ul>
</div>
    <p class="breadcrumbs"><a href="/" title="Hypertexthero homepage.">Hypertexthero</a> / <a href="/logbook/">Logbook</a> /</p>

  </div>

  <div id="content">
    


 
    <dl>
      <dt><a href="None">Enable Keyword Search in Textpattern</a> &nbsp;<a class="plink" title="Permanent link to this entry." href="/linked/2007/08/14/enable-keyword-search-in-textpattern/"># 14 aug 2007</a></dt>
      <dd>
    	  	<p><strong>Update 15 January 2009:</strong> As of Textpattern 4.0.6 or 4.07 the instructions below <em>no longer work</em>, and I have not managed to enable keyword search again with the new Textpattern publish.php code. I tried replacing <code>if (empty($cols) or $cols[0]  '') $cols = array('Title', 'Body');</code> with <code>if (empty($cols) or $cols[0]  &#39;&#39;) $cols = array(&#39;Title&#39;, &#39;Body&#39;, &#39;Keywords&#39;);</code> â€¦but then <strong>no</strong> search results are returned when a search is performed. Based on <a href="http://forum.textpattern.com/viewtopic.php?id=28904">this forum thread</a> I suspect a Textpattern bug is crawling about! I will keep this post updated with any developments. Thanks to <a href="http://www.digitaldesign.us/">Art Zoller Wagner</a> for alerting me to this issue.</p>

	<p>Â· Â· Â·</p>

	<p>The default Textpattern built-in search only returns results from the <strong>title</strong> and <strong>body</strong> of posts. The following are instructions to make Textpattern search through post <strong>keywords</strong> as well.</p>

	<ol>
		<li>Access your Textpattern website MySQL database using phpMyAdmin and click on the <strong>Textpattern</strong> table.</li>
		<li>Scroll down to the <strong>Indexes</strong> table on the bottom of the page and click on the pencil on the <strong>searching</strong> value row.</li>
		<li>Click on <strong>Go</strong> on the bottom-right next to the <em>Add to index [1] column(s)</em> to add a new field. The default value for the new field which appears as a drop-down button is <em>- &#8211; ignore &#8211; -</em>. Click on the drop-down button and select <strong>Keywords [varchar(255)]</strong>, then click on <strong>Save</strong>. You can now exit phpMyAdmin.</li>
		<li>Open <strong>publish.php</strong> in your website&#8217;s Textpattern folder and find the following code (lines 576 and 577 in Textpattern v4.0.5): <code>
$match = &quot;, match (Title,Body) against (&#39;$q&#39;) as score&quot;;
$search = &quot; and (Title rlike &#39;$q&#39; or Body rlike &#39;$q&#39;) $s_filter&quot;;
</code></li>
		<li>Change the above code to this: <code>
$match = &quot;, match (Title,Body,Keywords) against (&#39;$q&#39;) as score&quot;;
$search = &quot; and (Title rlike &#39;$q&#39; or Body rlike &#39;$q&#39; or Keywords rlike &#39;$q&#39;) $s_filter&quot;;
</code></li>
	</ol>

	<p>Thanks to <a href="http://www.paland.net/blog/383/textpattern-suche-auf-custom-fields-erweitern" title="Textpattern: Suche auf custom-fields erweitern / Expand search of textpattern to custom fields">a helpful article</a> which was <a href="http://forum.textpattern.com/viewtopic.php?id=23578">pointed out to me in the Textpattern forum</a>.</p>
      </dd>
    </dl>

  <p id="about">
    A <a href="/" title="Home.">Hypertexthero</a></b> link by <a href="http://simongriffee.com" title="See my photography website.">Simon Griffee</a> published on <a title="Permanent link to this entry." href="/linked/2007/08/14/enable-keyword-search-in-textpattern/">14 August 2007</a> under a <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons License</a>. See more links in the <a href="/linked/" title="List of links to other places on the internet that Hypertexthero finds interesting.">linked list</a>. Original articles are in the <a href="/archive/" title="Archive of original logbook entries.">archive</a>.
  </p>

     




<p class="paging">
  
  
    <a rel="prev" href="/logbook/2007/08/boycott-att/"><i>Previous entry:</i> <b>Boycott AT&amp;#38;T</b></a>
  
    <br>
  
    <a rel="next" href="/logbook/2007/08/editarea/"><i>Next entry:</i> <b>EditArea</b></a>
  
</p>

  </div> 

  <div id="footer">
    
    <form method="get" id="search" action="http://duckduckgo.com/">
    <input type="hidden" name="sites" value="hypertexthero.com"/>
    <input type="hidden" name="k8" value="#444444"/>
    <input type="hidden" name="k9" value="#D51920"/>
    <input type="hidden" name="kt" value="h"/>
    <input type="text" name="q" maxlength="255" placeholder=""/>
    <input id="searchbutton" type="submit" value="Search" />
</form>

    
    
    
    <p class="small">
      
      
      
      
      
    </p>
    
    
</div> 
</div> 
</div> 
<script src="/static/js/jquery-1.9.1.min.js"></script>



</body>
</html>
